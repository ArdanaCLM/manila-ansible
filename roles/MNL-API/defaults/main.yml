#
# (c) Copyright 2016 Hewlett Packard Enterprise Development LP
# (c) Copyright 2018-2019 SUSE LLC
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
---

ardanauser : "{{ ansible_env['USER'] }}"
ardanauser_home: "{{ ansible_env['HOME'] }}"
manila_component:
  - openstack-manila-api
  - openstack-manila-scheduler

manila_service_data: "{{ MNL_API }}"
manila_service_group_name: "{{ verb_hosts.MNL_API }}"

# flag to track if venv activation is required during start
manila_api_activate_required: false

# Default service directories
#manila_api_conf_dir: "{{ 'manila-api' | config_dir() }}"
manila_api_conf_dir: "/etc/manila/manila.conf.d"
manila_api_venv_share_dir: "{{ 'manila-api' | share_dir() }}/manila"

# Files that need to be symlinked from versioned conf dir to
# global conf dir
#manila_api_conf_symlinks:
#  - { dst: '{{ manila_dir }}/manila.conf', src: 'manila.conf' }

# Manila API auditing settings
manila_api_audit_enable: "{{ manila_audit_enable }}"

manila_public_endpoint: "{{ MNL_API.advertises.vips.public[0].url }}"

manila_glance_url: "{% if MNL_API.consumes_GLA_API is defined %}{{ MNL_API.consumes_GLA_API.vips.private[0].url }}{% endif %}"
manila_cinder_url: "{% if MNL_API.consumes_CND_API is defined %}{{ MNL_API.consumes_CND_API.vips.private[0].url }}{% endif %}"
